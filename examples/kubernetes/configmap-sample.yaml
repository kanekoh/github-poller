apiVersion: v1
kind: ConfigMap
metadata:
  name: github-poller-config
  annotations:
    description: "GitHub Poller サンプル設定"
data:
  config.yaml: |
    repositories:
      # サンプル 1: 基本的な設定
      # 実際の GitHub リポジトリ URL に置き換えてください
      - name: "sample-app"
        url: "https://github.com/YOUR-USERNAME/YOUR-REPO"
        branch: "main"
        pipeline: "demo-pipeline"
        params:
          - name: "repo-url"
            value: "${repo.url}"
          - name: "branch"
            value: "${repo.branch}"
        lastCheckedSHA: ""
      
      # サンプル 2: 異なるブランチを監視
      - name: "sample-app-develop"
        url: "https://github.com/YOUR-USERNAME/YOUR-REPO"
        branch: "develop"
        pipeline: "demo-pipeline"
        params:
          - name: "repo-url"
            value: "${repo.url}"
          - name: "branch"
            value: "${repo.branch}"
        lastCheckedSHA: ""
      
      # サンプル 3: パブリックリポジトリの例（Kubernetes 公式）
      # これは実際にポーリング可能ですが、変更は頻繁にあります
      # テスト目的でのみ使用してください
      # - name: "kubernetes-sample"
      #   url: "https://github.com/kubernetes/kubernetes"
      #   branch: "master"
      #   pipeline: "demo-pipeline"
      #   params:
      #     - name: "repo-url"
      #       value: "${repo.url}"
      #     - name: "branch"
      #       value: "${repo.branch}"
      #   lastCheckedSHA: ""

---
# このサンプル ConfigMap を使用するには：
# 1. YOUR-USERNAME と YOUR-REPO を実際の値に置き換える
# 2. kubectl apply -f configmap-sample.yaml
# 3. CronJob が次回実行時に自動的に監視を開始します

